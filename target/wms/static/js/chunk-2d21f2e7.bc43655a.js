(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f2e7"],{d973:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-row",{attrs:{type:"flex",justify:"space-between"}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticStyle:{"margin-top":"20px","margin-bottom":"10px","margin-left":"5px"},attrs:{type:"primary",plain:""},on:{click:function(e){return t.addProduct("add")}}},[t._v("添加产品")]),r("el-button",{attrs:{type:"danger",plain:""},on:{click:t.deleteList}},[t._v("批量删除")])],1),r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:19}},[r("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchProduct}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"产品名称"},model:{value:t.searchProduct.productName,callback:function(e){t.$set(t.searchProduct,"productName",e)},expression:"searchProduct.productName"}})],1),r("el-form-item",[r("el-input",{attrs:{placeholder:"产品价格"},model:{value:t.searchProduct.productPrice,callback:function(e){t.$set(t.searchProduct,"productPrice",e)},expression:"searchProduct.productPrice"}})],1),r("el-form-item",[r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchProduct.start,callback:function(e){t.$set(t.searchProduct,"start",e)},expression:"searchProduct.start"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("searchForm")}}},[t._v("查询")]),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.resetForm("searchForm")}}},[t._v("重置")])],1)],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:t.indexMethod}}),r("el-table-column",{attrs:{prop:"productName",label:"产品名称",width:"180"}}),r("el-table-column",{attrs:{prop:"productPrice",label:"产品价格",width:"120"}}),r("el-table-column",{attrs:{prop:"productSize",label:"产品大小",width:"120"}}),r("el-table-column",{attrs:{prop:"category.categoryName",label:"产品类别",width:"120"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),r("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180"}}),r("el-table-column",{attrs:{formatter:t.formatIsDelete,label:"是否有效"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"danger",plain:""},on:{click:function(r){return t.deleteProduct(e.row)}}},[t._v("删除")]),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(r){return t.updateProduct(e.row)}}},[t._v("编辑")])]}}])})],1),r("div",[r("el-pagination",{attrs:{"page-count":t.pageCount,"current-page":t.pageNo,background:"",layout:"prev, pager, next"},on:{"prev-click":t.pre,"next-click":t.next,"current-change":t.handleCurrentChange}})],1),r("div",[r("el-dialog",{attrs:{title:"添加产品",visible:t.dialogVisible,width:"30%",center:!0,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-form",{ref:"productForm",staticClass:"demo-ruleForm",attrs:{model:t.product,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[r("el-input",{model:{value:t.product.productName,callback:function(e){t.$set(t.product,"productName",e)},expression:"product.productName"}})],1),r("el-form-item",{attrs:{label:"产品尺寸",prop:"productSize"}},[r("el-input",{model:{value:t.product.productSize,callback:function(e){t.$set(t.product,"productSize",e)},expression:"product.productSize"}})],1),r("el-form-item",{attrs:{label:"产品价格",prop:"productPrice"}},[r("el-input",{model:{value:t.product.productPrice,callback:function(e){t.$set(t.product,"productPrice",e)},expression:"product.productPrice"}})],1),r("el-form-item",{attrs:{label:"产品分类",prop:"categoryId"}},[r("treeselect",{attrs:{options:t.categoryList,normalizer:t.normalizer,placeholder:"请选择产品类别"},model:{value:t.product.categoryId,callback:function(e){t.$set(t.product,"categoryId",e)},expression:"product.categoryId"}})],1),r("el-form-item",{attrs:{label:"是否有效",prop:"isDelete"}},[r("el-radio-group",{model:{value:t.product.isDelete,callback:function(e){t.$set(t.product,"isDelete",e)},expression:"product.isDelete"}},[r("el-radio",{attrs:{label:"0"}},[t._v("无效")]),r("el-radio",{attrs:{label:"1"}},[t._v("有效")])],1)],1),r("el-form-item",{attrs:{label:"创建日期",prop:"createTime"}},[r("div",{staticClass:"block"},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.product.createTime,callback:function(e){t.$set(t.product,"createTime",e)},expression:"product.createTime"}})],1)]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("productForm")}}},[t._v("提交")])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)],1)},o=[],c=(r("d3b7"),r("25f0"),r("e9c4"),r("bc3a")),i=r.n(c),d=r("ca17"),s=r.n(d),l=(r("542c"),{name:"ProductList",components:{Treeselect:s.a},data:function(){return{product:{productName:"",productSize:"",productPrice:"",categoryId:"1",isDelete:"1",createTime:"",productId:""},searchProduct:{productName:"",productPrice:"",start:"",end:""},isUpdate:!1,dialogVisible:!1,categoryList:[],methodName:"",productIdList:[],tableData:[],pageNo:1,pageSize:5,pageCount:0}},created:function(){this.getPage(this.pageNo,this.pageSize),this.getCategoryAll()},methods:{updateProduct:function(t){this.dialogVisible=!0,this.methodName="update",this.product.productId=t.productId,this.product.productName=t.productName,this.product.productSize=t.productSize,this.product.productPrice=t.productPrice,this.product.categoryId=t.categoryId,this.product.isDelete=t.isDelete.toString(),this.product.createTime=t.createTime},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;"add"===e.methodName?i.a.post("http://localhost:8080/productAdd",JSON.stringify(e.product),{headers:{"Content-Type":"application/json"}}).then((function(t){0===t.data.code?(e.getPage(e.pageNo,e.pageSize),e.$message({message:"添加成功",type:"success"})):-1===t.data.code&&e.$message({message:"添加失败",type:"error"})})):"update"===e.methodName&&i.a.post("http://localhost:8080/productUpdate",JSON.stringify(e.product),{headers:{"Content-Type":"application/json"}}).then((function(t){e.isUpdate=!1,0===t.data.code&&(e.getPage(e.pageNo,e.pageSize),e.$message({message:"更新成功",type:"success"}))})),e.isUpdate=!1,e.dialogVisible=!1,e.product.productName="",e.product.productSize="",e.product.productPrice="",e.product.categoryId="",e.product.isDelete="",e.product.createTime="",e.product.productId=""}))},addProduct:function(){this.methodName="add",this.dialogVisible=!0},normalizer:function(t){return{id:t.categoryId,label:t.categoryName,children:0===t.subCategory.length?"":t.subCategory}},handleClose:function(){this.dialogVisible=!1;var t=this;t.product.productName="",t.product.productSize="",t.product.productPrice="",t.product.categoryId="1",t.product.isDelete="1",t.product.createTime="",t.product.productId=""},deleteProduct:function(t){this.productIdList[0]=t,this.deleteList()},deleteList:function(){var t=this;0===this.productIdList.length?this.$message({message:"请选择产品在删除",type:"error"}):this.$confirm("将删除产品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var e=[],r=t,a=0;a<t.productIdList.length;a++)e.push(t.productIdList[a].productId);t.productIdList=[],i.a.post("http://localhost:8080/productDelete",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(t){r.getPage(r.pageNo,r.pageSize),0===t.data.code&&r.$message({message:"删除成功",type:"success"})}))})).catch((function(){t.productIdList=[],t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(t){this.productIdList=t},formatIsDelete:function(t){return 0===t.isDelete?"无效":"有效"},indexMethod:function(t){return t+1},handleCurrentChange:function(t){this.pageNo=t,this.getPage(t,this.pageSize)},pre:function(){this.getPage(this.pageNo-1,this.pageSize),this.pageNo=this.pageNo-1},next:function(){this.getPage(this.pageNo+1,this.pageSize),this.pageNo=this.pageNo+1},getPage:function(t,e){var r=this;i.a.get("http://localhost:8080/productList",{params:{pageNo:t,pageSize:e}}).then((function(t){r.tableData=t.data.data.data,r.pageCount=t.data.data.pageCount}))},submit:function(t){var e=this;this.searchProduct.start.length>0&&(this.searchProduct.end=this.searchProduct.start[1],this.searchProduct.start=this.searchProduct.start[0]),this.$refs[t].validate((function(t){if(t){var r=e;i.a.get("http://localhost:8080/productList",{params:{pageNo:r.pageNo,pageSize:r.pageSize,productName:r.searchProduct.productName,productPrice:r.searchProduct.productPrice,start:r.searchProduct.start,end:r.searchProduct.end}}).then((function(t){r.tableData=t.data.data.data,r.pageCount=t.data.data.pageCount,r.searchProduct.productName="",r.searchProduct.productPrice="",r.searchProduct.start="",r.searchProduct.end=""}))}}))},getCategoryAll:function(){var t=this;i.a.get("http://localhost:8080/categoryAll",{}).then((function(e){t.categoryList=e.data.data,console.log(t.categoryList)}))},resetForm:function(){this.searchProduct.productName="",this.searchProduct.productPrice="",this.searchProduct.start="",this.searchProduct.end=""}}}),u=l,p=r("2877"),n=Object(p["a"])(u,a,o,!1,null,"a1905efe",null);e["default"]=n.exports}}]);