(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a1af9df"],{"1b64":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",[l("el-button",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-left":"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.addLevel("add")}}},[e._v("添加等级")]),l("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteList}},[e._v("批量删除")])],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),l("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexMethod}}),l("el-table-column",{attrs:{prop:"levelName",label:"级别名称",width:"180"}}),l("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),l("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),l("el-table-column",{attrs:{formatter:e.formatIsDelete,label:"是否有效"}}),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",plain:""},on:{click:function(l){return e.deleteLevel(t.row)}}},[e._v("删除")]),l("el-button",{attrs:{type:"primary",plain:""},on:{click:function(l){return e.updatelevel(t.row)}}},[e._v("编辑")])]}}])})],1),l("div",[l("el-pagination",{attrs:{"page-count":e.pageCount,"current-page":e.pageNo,background:"",layout:"prev, pager, next"},on:{"prev-click":e.pre,"next-click":e.next,"current-change":e.handleCurrentChange}})],1),l("div",[l("el-dialog",{attrs:{title:"添加等级",visible:e.dialogVisible,width:"30%",center:!0,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"levelForm",staticClass:"demo-ruleForm",attrs:{model:e.level,rules:e.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"级别名称",prop:"levelName"}},[l("el-input",{model:{value:e.level.levelName,callback:function(t){e.$set(e.level,"levelName",t)},expression:"level.levelName"}})],1),l("el-form-item",{attrs:{label:"是否有效",prop:"isDelete"}},[l("el-radio-group",{model:{value:e.level.isDelete,callback:function(t){e.$set(e.level,"isDelete",t)},expression:"level.isDelete"}},[l("el-radio",{attrs:{label:"0"}},[e._v("无效")]),l("el-radio",{attrs:{label:"1"}},[e._v("有效")])],1)],1),l("el-form-item",{attrs:{label:"创建日期",prop:"createTime"}},[l("div",{staticClass:"block"},[l("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.level.createTime,callback:function(t){e.$set(e.level,"createTime",t)},expression:"level.createTime"}})],1)]),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("levelForm")}}},[e._v("提交")])],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)],1)},i=[],n=(l("e9c4"),l("d3b7"),l("25f0"),l("bc3a")),s=l.n(n),o={name:"LevelList",data:function(){return{methodName:"",levelIdList:[],tableData:[],pageNo:1,pageSize:5,pageCount:0,isUpdate:!1,dialogVisible:!1,level:{levelName:"",createTime:"",isDelete:"1",levelId:""},rules:{levelName:[{required:!0,message:"请输入级别名称",trigger:"blur"}],createTime:[{required:!0,message:"请输入创建日期",trigger:"blur"}],isDelete:[{required:!0,message:"请选择是否有效",trigger:"blur"}]}}},created:function(){this.getPage(this.pageNo,this.pageSize)},methods:{handleClose:function(){this.level.isDelete="1",this.level.levelName="",this.level.createTime="",this.level.levelId="",this.dialogVisible=!1},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"===t.methodName?s.a.post("http://localhost:8080/levelAdd",JSON.stringify(t.level),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code?t.$message({message:"添加成功",type:"success"}):-1===e.data.code&&t.$message({message:"添加失败",type:"error"})})):"update"===t.methodName&&s.a.post("http://localhost:8080/levelUpdate",JSON.stringify(t.level),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code&&t.$message({message:"更新成功",type:"success"})})),t.dialogVisible=!1,t.getPage(t.pageNo,t.pageSize),t.level.isDelete="1",t.level.levelName="",t.level.createTime="",t.level.levelId="",t.getPage(t.pageNo,t.pageSize)}))},updatelevel:function(e){this.methodName="update",this.level.createTime=e.createTime,this.level.levelName=e.levelName,this.level.levelId=e.levelId,this.level.isDelete=e.isDelete.toString(),this.dialogVisible=!0},addLevel:function(e){this.methodName=e,this.dialogVisible=!0},deleteLevel:function(e){this.levelIdList[0]=e,this.deleteList()},deleteList:function(){var e=this;0===this.levelIdList.length?this.$message({message:"请选择客户等级删除",type:"error"}):this.$confirm("将删除该客户等级信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=[],l=e,a=0;a<e.levelIdList.length;a++)t.push(e.levelIdList[a].levelId);e.levelIdList=[],s.a.post("http://localhost:8080/levelDelete",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(e){l.getPage(l.pageNo,l.pageSize)}))})).catch((function(){e.levelIdList=[],e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.levelIdList=e},formatIsDelete:function(e){return 0===e.isDelete?"无效":"有效"},indexMethod:function(e){return e+1},handleCurrentChange:function(e){this.pageNo=e,this.getPage(e,this.pageSize)},pre:function(){this.getPage(this.pageNo-1,this.pageSize),this.pageNo=this.pageNo-1},next:function(){this.getPage(this.pageNo+1,this.pageSize),this.pageNo=this.pageNo+1},getPage:function(e,t){var l=this;s.a.get("http://localhost:8080/levelList",{params:{pageNo:e,pageSize:t}}).then((function(e){l.tableData=e.data.data.data,l.pageCount=e.data.data.pageCount}))}}},r=o,d=l("2877"),c=Object(d["a"])(r,a,i,!1,null,"a672b452",null);t["default"]=c.exports},e9c4:function(e,t,l){var a=l("23e7"),i=l("d066"),n=l("d039"),s=i("JSON","stringify"),o=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,d=/^[\uDC00-\uDFFF]$/,c=function(e,t,l){var a=l.charAt(t-1),i=l.charAt(t+1);return r.test(e)&&!d.test(i)||d.test(e)&&!r.test(a)?"\\u"+e.charCodeAt(0).toString(16):e},u=n((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&a({target:"JSON",stat:!0,forced:u},{stringify:function(e,t,l){var a=s.apply(null,arguments);return"string"==typeof a?a.replace(o,c):a}})}}]);