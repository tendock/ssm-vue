(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32d83524"],{"745b":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",{attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:4}},[o("el-button",{staticStyle:{"margin-top":"20px","margin-bottom":"10px","margin-left":"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.addRepo("add")}}},[e._v("添加仓库")]),o("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteList}},[e._v("批量删除")])],1),o("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:19}},[o("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchRepo}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"仓库名称"},model:{value:e.searchRepo.repoName,callback:function(t){e.$set(e.searchRepo,"repoName",t)},expression:"searchRepo.repoName"}})],1),o("el-form-item",[o("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchRepo.start,callback:function(t){e.$set(e.searchRepo,"start",t)},expression:"searchRepo.start"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("searchForm")}}},[e._v("查询")]),o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{type:"index",label:"序号",width:"50",index:e.indexMethod}}),o("el-table-column",{attrs:{prop:"repoName",label:"仓库名称",width:"180"}}),o("el-table-column",{attrs:{prop:"repoAddress",label:"仓库地址",width:"180"}}),o("el-table-column",{attrs:{prop:"repoArea",label:"仓库面积",width:"120"}}),o("el-table-column",{attrs:{prop:"repoDesc",label:"仓库描述",width:"120"}}),o("el-table-column",{attrs:{prop:"repoStatus",formatter:e.formatStatus,label:"仓库状态",width:"80"}}),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"120"}}),o("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"120"}}),o("el-table-column",{attrs:{formatter:e.formatIsDelete,label:"是否有效"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"danger",plain:""},on:{click:function(o){return e.deleteRepo(t.row)}}},[e._v("删除")]),o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(o){return e.updateRepo(t.row)}}},[e._v("编辑")])]}}])})],1),o("div",[o("el-pagination",{attrs:{"page-count":e.pageCount,"current-page":e.pageNo,background:"",layout:"prev, pager, next"},on:{"prev-click":e.pre,"next-click":e.next,"current-change":e.handleCurrentChange}})],1),o("div",[o("el-dialog",{attrs:{title:"添加仓库",visible:e.dialogVisible,width:"30%",center:!0,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"repoForm",staticClass:"demo-ruleForm",attrs:{model:e.repositoryDto,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"仓库名称",prop:"supplierName"}},[o("el-input",{model:{value:e.repositoryDto.repoName,callback:function(t){e.$set(e.repositoryDto,"repoName",t)},expression:"repositoryDto.repoName"}})],1),o("el-form-item",{attrs:{label:"仓库地址",prop:"supplierEmail"}},[o("el-input",{model:{value:e.repositoryDto.repoAddress,callback:function(t){e.$set(e.repositoryDto,"repoAddress",t)},expression:"repositoryDto.repoAddress"}})],1),o("el-form-item",{attrs:{label:"仓库面积",prop:"supplierTel"}},[o("el-input",{model:{value:e.repositoryDto.repoArea,callback:function(t){e.$set(e.repositoryDto,"repoArea",t)},expression:"repositoryDto.repoArea"}})],1),o("el-form-item",{attrs:{label:"仓库描述",prop:"supplierLeader"}},[o("el-input",{model:{value:e.repositoryDto.repoDesc,callback:function(t){e.$set(e.repositoryDto,"repoDesc",t)},expression:"repositoryDto.repoDesc"}})],1),o("el-form-item",{attrs:{label:"仓库状态",prop:"repoStatus"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.repositoryDto.repoStatus,callback:function(t){e.$set(e.repositoryDto,"repoStatus",t)},expression:"repositoryDto.repoStatus"}},[o("el-option",{attrs:{label:"故障",value:"0"}},[e._v("故障")]),o("el-option",{attrs:{label:"正常",value:"1"}},[e._v("正常")]),o("el-option",{attrs:{label:"已满",value:"2"}},[e._v("已满")]),o("el-option",{attrs:{label:"废弃",value:"3"}},[e._v("废弃")])],1)],1),o("el-form-item",{attrs:{label:"是否有效",prop:"isDelete"}},[o("el-radio-group",{model:{value:e.repositoryDto.isDelete,callback:function(t){e.$set(e.repositoryDto,"isDelete",t)},expression:"repositoryDto.isDelete"}},[o("el-radio",{attrs:{label:"0"}},[e._v("无效")]),o("el-radio",{attrs:{label:"1"}},[e._v("有效")])],1)],1),o("el-form-item",{attrs:{label:"创建日期",prop:"createTime"}},[o("div",{staticClass:"block"},[o("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.repositoryDto.createTime,callback:function(t){e.$set(e.repositoryDto,"createTime",t)},expression:"repositoryDto.createTime"}})],1)]),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("repoForm")}}},[e._v("提交")])],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)],1)},a=[],s=o("b192"),i=(o("e9c4"),o("d3b7"),o("25f0"),o("2f62")),p=o("bc3a"),l=o.n(p),n={name:"RepositoryList",data:function(){return{searchRepo:{repoName:"",start:"",end:""},repoIdList:[],tableData:[],pageNo:1,pageSize:5,pageCount:0,dialogVisible:!1,methodName:"",repositoryDto:{userId:"",repoId:"",repoAddress:"",repoArea:"",repoDesc:"",repoStatus:"1",createTime:"",isDelete:"1",repoName:""}}},created:function(){this.repositoryDto.userId=this.introduction.userId,this.getPage(this.pageNo,this.pageSize)},computed:Object(s["a"])({},Object(i["b"])(["roles","introduction"])),methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"===t.methodName?l.a.post("http://localhost:8080/repoAdd",JSON.stringify(t.repositoryDto),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code?(t.getPage(t.pageNo,t.pageSize),t.$message({message:"添加成功",type:"success"})):-1===e.data.code&&t.$message({message:"添加失败",type:"error"})})):"update"===t.methodName&&l.a.post("http://localhost:8080/repoUpdate",JSON.stringify(t.repositoryDto),{headers:{"Content-Type":"application/json"}}).then((function(e){t.isUpdate=!1,0===e.data.code&&(t.getPage(t.pageNo,t.pageSize),t.$message({message:"更新成功",type:"success"}))})),t.dialogVisible=!1,t.repositoryDto.repoDesc="",t.repositoryDto.repoArea="",t.repositoryDto.repoAddress="",t.repositoryDto.repoId="",t.repositoryDto.repoName="",t.repositoryDto.isDelete="1",t.repositoryDto.repoStatus="1"}))},updateRepo:function(e){this.dialogVisible=!0,this.methodName="update",this.repositoryDto.repoDesc=e.repoDesc,this.repositoryDto.repoArea=e.repoArea,this.repositoryDto.repoAddress=e.repoAddress,this.repositoryDto.repoId=e.repoId,this.repositoryDto.repoName=e.repoName,this.repositoryDto.createTime=e.createTime,this.repositoryDto.isDelete=e.isDelete.toString(),this.repositoryDto.repoStatus=e.repoStatus.toString()},handleClose:function(){this.dialogVisible=!1,this.repositoryDto.repoDesc="",this.repositoryDto.repoArea="",this.repositoryDto.repoAddress="",this.repositoryDto.repoId="",this.repositoryDto.repoName="",this.repositoryDto.isDelete="1",this.repositoryDto.repoStatus="1"},addRepo:function(){this.dialogVisible=!0,this.methodName="add"},deleteRepo:function(e){this.repoIdList[0]=e,this.deleteList()},deleteList:function(){var e=this;0===this.repoIdList.length?this.$message({message:"请选择承运商信息",type:"error"}):this.$confirm("将删除仓库信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=[],o=e,r=0;r<e.repoIdList.length;r++)t.push(e.repoIdList[r].repoId);e.repoIdList=[],l.a.post("http://localhost:8080/repoDelete",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(e){o.getPage(o.pageNo,o.pageSize),0===e.data.code&&o.$message({message:"删除成功",type:"success"})}))})).catch((function(){e.repoIdList=[],e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.repoIdList=e},formatIsDelete:function(e){return 0===e.isDelete?"无效":"有效"},formatStatus:function(e){return 0===e.repoStatus?"故障":1===e.repoStatus?"正常":2===e.repoStatus?"已满":3===e.repoStatus?"废弃":void 0},indexMethod:function(e){return e+1},handleCurrentChange:function(e){this.pageNo=e,this.getPage(e,this.pageSize)},pre:function(){this.getPage(this.pageNo-1,this.pageSize),this.pageNo=this.pageNo-1},next:function(){this.getPage(this.pageNo+1,this.pageSize),this.pageNo=this.pageNo+1},submit:function(e){var t=this;this.searchRepo.start.length>0&&(this.searchRepo.end=this.searchRepo.start[1],this.searchRepo.start=this.searchRepo.start[0]),this.$refs[e].validate((function(e){if(e){var o=t;l.a.get("http://localhost:8080/repoList",{params:{pageNo:o.pageNo,pageSize:o.pageSize,repoName:o.searchRepo.repoName,start:o.searchRepo.start,end:o.searchRepo.end}}).then((function(e){o.tableData=e.data.data.data,o.pageCount=e.data.data.pageCount,o.searchRepo.repoName="",o.searchRepo.start="",o.searchRepo.end=""}))}}))},resetForm:function(){this.searchRepo.repoName="",this.searchRepo.start="",this.searchRepo.end=""},getPage:function(e,t){var o=this;l.a.get("http://localhost:8080/repoList",{params:{pageNo:e,pageSize:t}}).then((function(e){o.tableData=e.data.data.data,o.pageCount=e.data.data.pageCount}))}}},c=n,d=o("2877"),u=Object(d["a"])(c,r,a,!1,null,"17124b86",null);t["default"]=u.exports},e9c4:function(e,t,o){var r=o("23e7"),a=o("d066"),s=o("d039"),i=a("JSON","stringify"),p=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,n=/^[\uDC00-\uDFFF]$/,c=function(e,t,o){var r=o.charAt(t-1),a=o.charAt(t+1);return l.test(e)&&!n.test(a)||n.test(e)&&!l.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},d=s((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&r({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,o){var r=i.apply(null,arguments);return"string"==typeof r?r.replace(p,c):r}})}}]);