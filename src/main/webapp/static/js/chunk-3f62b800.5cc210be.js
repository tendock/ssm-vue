(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f62b800"],{"48f0":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-button",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-left":"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.addSource("add")}}},[e._v("添加来源")]),a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteList}},[e._v("批量删除")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"sourceName",label:"来源名称",width:"180"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{formatter:e.formatIsDelete,label:"是否有效"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(a){return e.deleteSource(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){return e.updateSource(t.row)}}},[e._v("编辑")])]}}])})],1),a("div",[a("el-pagination",{attrs:{"page-count":e.pageCount,"current-page":e.pageNo,background:"",layout:"prev, pager, next"},on:{"prev-click":e.pre,"next-click":e.next,"current-change":e.handleCurrentChange}})],1),a("div",[a("el-dialog",{attrs:{title:"添加来源",visible:e.dialogVisible,width:"30%",center:!0,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"sourceForm",staticClass:"demo-ruleForm",attrs:{model:e.source,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"来源名称",prop:"sourceName"}},[a("el-input",{model:{value:e.source.sourceName,callback:function(t){e.$set(e.source,"sourceName",t)},expression:"source.sourceName"}})],1),a("el-form-item",{attrs:{label:"是否有效",prop:"isDelete"}},[a("el-radio-group",{model:{value:e.source.isDelete,callback:function(t){e.$set(e.source,"isDelete",t)},expression:"source.isDelete"}},[a("el-radio",{attrs:{label:"0"}},[e._v("无效")]),a("el-radio",{attrs:{label:"1"}},[e._v("有效")])],1)],1),a("el-form-item",{attrs:{label:"创建日期",prop:"createTime"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.source.createTime,callback:function(t){e.$set(e.source,"createTime",t)},expression:"source.createTime"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("sourceForm")}}},[e._v("提交")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)],1)},o=[],r=(a("d3b7"),a("25f0"),a("e9c4"),a("bc3a")),i=a.n(r),n={name:"SourceList",data:function(){return{source:{sourceName:"",createTime:"",isDelete:"1",sourceId:""},sourceIdList:[],dialogVisible:!1,tableData:[],pageNo:1,pageSize:5,pageCount:0,methodName:"",rules:{sourceName:[{required:!0,message:"请输入来源名称",trigger:"blur"}],createTime:[{required:!0,message:"请输入创建日期",trigger:"blur"}],isDelete:[{required:!0,message:"请选择是否有效",trigger:"blur"}]}}},created:function(){this.getPage(this.pageNo,this.pageSize)},methods:{updateSource:function(e){this.methodName="update",this.dialogVisible=!0,this.source.sourceId=e.sourceId,this.source.sourceName=e.sourceName,this.source.createTime=e.createTime,this.source.isDelete=e.isDelete.toString()},deleteSource:function(e){this.sourceIdList[0]=e,this.deleteList()},deleteList:function(){var e=this;0===this.sourceIdList.length?this.$message({message:"请选择客户来源删除",type:"error"}):this.$confirm("将删除该客户来源信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=[],a=0;a<e.sourceIdList.length;a++)t.push(e.sourceIdList[a].sourceId);e.sourceIdList=[];var s=e;i.a.post("http://localhost:8080/sourceDelete",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code&&(s.getPage(s.pageNo,s.pageSize),s.$message({message:"删除成功",type:"success"}))}))})).catch((function(){e.sourceIdList=[],e.$message({type:"info",message:"已取消删除"})}))},addSource:function(){this.methodName="add",this.dialogVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"===t.methodName?i.a.post("http://localhost:8080/sourceAdd",JSON.stringify(t.source),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code?t.$message({message:"添加成功",type:"success"}):-1===e.data.code&&t.$message({message:"添加失败",type:"error"})})):"update"===t.methodName&&i.a.post("http://localhost:8080/sourceUpdate",JSON.stringify(t.source),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code&&(t.getPage(t.pageNo,t.pageSize),t.$message({message:"更新成功",type:"success"}))})),t.getPage(t.pageNo,t.pageSize),t.dialogVisible=!1,t.source.isDelete="1",t.source.sourceId="",t.source.createTime="",t.source.sourceName=""}))},handleClose:function(){this.source.isDelete="1",this.source.sourceId="",this.source.createTime="",this.source.sourceName="",this.dialogVisible=!1},handleSelectionChange:function(e){this.sourceIdList=e},formatIsDelete:function(e){return 0===e.isDelete?"无效":"有效"},indexMethod:function(e){return e+1},handleCurrentChange:function(e){this.pageNo=e,this.getPage(e,this.pageSize)},pre:function(){this.getPage(this.pageNo-1,this.pageSize),this.pageNo=this.pageNo-1},next:function(){this.getPage(this.pageNo+1,this.pageSize),this.pageNo=this.pageNo+1},getPage:function(e,t){var a=this;i.a.get("http://localhost:8080/sourceList",{params:{pageNo:e,pageSize:t}}).then((function(e){a.tableData=e.data.data.data,a.pageCount=e.data.data.pageCount}))}}},c=n,l=a("2877"),u=Object(l["a"])(c,s,o,!1,null,"2df056f6",null);t["default"]=u.exports},e9c4:function(e,t,a){var s=a("23e7"),o=a("d066"),r=a("d039"),i=o("JSON","stringify"),n=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var s=a.charAt(t-1),o=a.charAt(t+1);return c.test(e)&&!l.test(o)||l.test(e)&&!c.test(s)?"\\u"+e.charCodeAt(0).toString(16):e},d=r((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&s({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,a){var s=i.apply(null,arguments);return"string"==typeof s?s.replace(n,u):s}})}}]);