(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53d79703"],{cad1:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-top":"20px","margin-bottom":"10px","margin-left":"5px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.addCustomer("add")}}},[e._v("添加客户")]),s("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteList}},[e._v("批量删除")])],1),s("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:19}},[s("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchCustomer}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"客户姓名"},model:{value:e.searchCustomer.customerName,callback:function(t){e.$set(e.searchCustomer,"customerName",t)},expression:"searchCustomer.customerName"}})],1),s("el-form-item",[s("el-input",{attrs:{placeholder:"客户联系电话"},model:{value:e.searchCustomer.customerTel,callback:function(t){e.$set(e.searchCustomer,"customerTel",t)},expression:"searchCustomer.customerTel"}})],1),s("el-form-item",[s("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchCustomer.start,callback:function(t){e.$set(e.searchCustomer,"start",t)},expression:"searchCustomer.start"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("searchForm")}}},[e._v("查询")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexMethod}}),s("el-table-column",{attrs:{prop:"customerName",label:"客户名称",width:"120"}}),s("el-table-column",{attrs:{prop:"customerLeader",label:"客户负责人",width:"120"}}),s("el-table-column",{attrs:{prop:"customerTel",label:"客户电话",width:"120"}}),s("el-table-column",{attrs:{prop:"customerEmail",label:"客户邮箱",width:"120"}}),s("el-table-column",{attrs:{prop:"customerAddress",label:"客户地址",width:"150"}}),s("el-table-column",{attrs:{prop:"level.levelName",label:"客户等级",width:"120"}}),s("el-table-column",{attrs:{prop:"source.sourceName",label:"客户来源",width:"120"}}),s("el-table-column",{attrs:{prop:"industry.industryName",label:"客户行业",width:"120"}}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),s("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180"}}),s("el-table-column",{attrs:{formatter:e.formatIsDelete,label:"是否有效"}}),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger",plain:""},on:{click:function(s){return e.deleteCustomer(t.row)}}},[e._v("删除")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:function(s){return e.updateCustomer(t.row)}}},[e._v("编辑")])]}}])})],1),s("div",[s("el-pagination",{attrs:{"page-count":e.pageCount,"current-page":e.pageNo,background:"",layout:"prev, pager, next"},on:{"prev-click":e.pre,"next-click":e.next,"current-change":e.handleCurrentChange}})],1),s("div",[s("el-dialog",{attrs:{title:"添加客户",visible:e.dialogVisible,width:"30%",center:!0,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{ref:"customerForm",staticClass:"demo-ruleForm",attrs:{model:e.customer,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"客户姓名",prop:"customerName"}},[s("el-input",{model:{value:e.customer.customerName,callback:function(t){e.$set(e.customer,"customerName",t)},expression:"customer.customerName"}})],1),s("el-form-item",{attrs:{label:"客户邮箱",prop:"customerEmail"}},[s("el-input",{model:{value:e.customer.customerEmail,callback:function(t){e.$set(e.customer,"customerEmail",t)},expression:"customer.customerEmail"}})],1),s("el-form-item",{attrs:{label:"客户电话",prop:"customerTel"}},[s("el-input",{model:{value:e.customer.customerTel,callback:function(t){e.$set(e.customer,"customerTel",t)},expression:"customer.customerTel"}})],1),s("el-form-item",{attrs:{label:"客户负责人",prop:"customerLeader"}},[s("el-input",{model:{value:e.customer.customerLeader,callback:function(t){e.$set(e.customer,"customerLeader",t)},expression:"customer.customerLeader"}})],1),s("el-form-item",{attrs:{label:"客户地址",prop:"customerAddress"}},[s("el-input",{model:{value:e.customer.customerAddress,callback:function(t){e.$set(e.customer,"customerAddress",t)},expression:"customer.customerAddress"}})],1),s("el-form-item",{attrs:{label:"客服来源",prop:"sourceId"}},[s("el-select",{attrs:{placeholder:"请选择客户来源"},model:{value:e.customer.sourceId,callback:function(t){e.$set(e.customer,"sourceId",t)},expression:"customer.sourceId"}},e._l(e.sourceList,(function(t,r){return s("el-option",{key:r,attrs:{value:t.sourceId,label:t.sourceName}},[e._v(e._s(t.sourceName))])})),1)],1),s("el-form-item",{attrs:{label:"客服等级",prop:"levelId"}},[s("el-select",{attrs:{placeholder:"请选择客户等级"},model:{value:e.customer.levelId,callback:function(t){e.$set(e.customer,"levelId",t)},expression:"customer.levelId"}},e._l(e.levelList,(function(t,r){return s("el-option",{key:r,attrs:{value:t.levelId,label:t.levelName}},[e._v(e._s(t.levelName))])})),1)],1),s("el-form-item",{attrs:{label:"客户行业",prop:"industryId"}},[s("el-select",{attrs:{placeholder:"请选择客户行业"},model:{value:e.customer.industryId,callback:function(t){e.$set(e.customer,"industryId",t)},expression:"customer.industryId"}},e._l(e.industryList,(function(t,r){return s("el-option",{key:r,attrs:{value:t.industryId,label:t.industryName}},[e._v(e._s(t.industryName))])})),1)],1),s("el-form-item",{attrs:{label:"是否有效",prop:"isDelete"}},[s("el-radio-group",{model:{value:e.customer.isDelete,callback:function(t){e.$set(e.customer,"isDelete",t)},expression:"customer.isDelete"}},[s("el-radio",{attrs:{label:"0"}},[e._v("无效")]),s("el-radio",{attrs:{label:"1"}},[e._v("有效")])],1)],1),s("el-form-item",{attrs:{label:"创建日期",prop:"createTime"}},[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.customer.createTime,callback:function(t){e.$set(e.customer,"createTime",t)},expression:"customer.createTime"}})],1)]),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("customerForm")}}},[e._v("提交")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)],1)},o=[],a=(s("d3b7"),s("25f0"),s("e9c4"),s("bc3a")),l=s.n(a),c={name:"CustomerList",data:function(){return{searchCustomer:{customerName:"",customerTel:"",start:"",end:""},customer:{customerId:"",customerName:"",customerLeader:"",customerTel:"",customerEmail:"",customerAddress:"",levelId:"",sourceId:"",industryId:"",createTime:"",isDelete:"1"},customerIdList:[],tableData:[],pageNo:1,pageSize:5,pageCount:0,dialogVisible:!1,methodName:"",sourceList:"",levelList:"",industryList:""}},created:function(){this.getPage(this.pageNo,this.pageSize),this.getSourceAll(),this.getLevelList(),this.getIndustryList()},methods:{resetForm:function(){this.searchCustomer.customerName="",this.searchCustomer.customerTel="",this.searchCustomer.start="",this.searchCustomer.end=""},submit:function(e){var t=this;this.searchCustomer.start.length>0&&(this.searchCustomer.end=this.searchCustomer.start[1],this.searchCustomer.start=this.searchCustomer.start[0]),this.$refs[e].validate((function(e){if(e){var s=t;l.a.get("http://localhost:8080/customerList",{params:{pageNo:s.pageNo,pageSize:s.pageSize,customerName:s.searchCustomer.customerName,customerTel:s.searchCustomer.customerTel,start:s.searchCustomer.start,end:s.searchCustomer.end}}).then((function(e){s.tableData=e.data.data.data,s.pageCount=e.data.data.pageCount,s.searchCustomer.customerName="",s.searchCustomer.customerTel="",s.searchCustomer.start="",s.searchCustomer.end=""}))}}))},updateCustomer:function(e){this.methodName="update",this.dialogVisible=!0,this.customer.customerId=e.customerId,this.customer.customerName=e.customerName,this.customer.customerLeader=e.customerLeader,this.customer.customerTel=e.customerTel,this.customer.customerEmail=e.customerEmail,this.customer.customerAddress=e.customerAddress,this.customer.levelId=e.levelId,this.customer.sourceId=e.sourceId,this.customer.industryId=e.industryId,this.customer.createTime=e.createTime,this.customer.isDelete=e.isDelete.toString()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"===t.methodName?l.a.post("http://localhost:8080/customerAdd",JSON.stringify(t.customer),{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.code?(t.getPage(t.pageNo,t.pageSize),t.$message({message:"添加成功",type:"success"})):-1===e.data.code&&t.$message({message:"添加失败",type:"error"})})):"update"===t.methodName&&l.a.post("http://localhost:8080/customerUpdate",JSON.stringify(t.customer),{headers:{"Content-Type":"application/json"}}).then((function(e){t.isUpdate=!1,0===e.data.code&&(t.getPage(t.pageNo,t.pageSize),t.$message({message:"更新成功",type:"success"}))})),t.dialogVisible=!1,t.customer.customerId="",t.customer.customerName="",t.customer.customerLeader="",t.customer.customerTel="",t.customer.customerEmail="",t.customer.customerAddress="",t.customer.levelId="",t.customer.sourceId="",t.customer.industryId="",t.customer.createTime="",t.customer.isDelete="1"}))},handleClose:function(){var e=this;this.dialogVisible=!1,e.customer.customerId="",e.customer.customerName="",e.customer.customerLeader="",e.customer.customerTel="",e.customer.customerEmail="",e.customer.customerAddress="",e.customer.levelId="",e.customer.sourceId="",e.customer.industryId="",e.customer.createTime="",e.customer.isDelete="1"},addCustomer:function(){this.methodName="add",this.dialogVisible=!0},deleteCustomer:function(e){this.customerIdList[0]=e,this.deleteList()},deleteList:function(){var e=this;0===this.customerIdList.length?this.$message({message:"请选择用户信息",type:"error"}):this.$confirm("将删除客户信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=[],s=e,r=0;r<e.customerIdList.length;r++)t.push(e.customerIdList[r].customerId);e.customerIdList=[],l.a.post("http://localhost:8080/customerDelete",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(e){s.getPage(s.pageNo,s.pageSize),0===e.data.code&&s.$message({message:"删除成功",type:"success"})}))})).catch((function(){e.customerIdList=[],e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.customerIdList=e},formatIsDelete:function(e){return 0===e.isDelete?"无效":"有效"},indexMethod:function(e){return e+1},handleCurrentChange:function(e){this.pageNo=e,this.getPage(e,this.pageSize)},pre:function(){this.getPage(this.pageNo-1,this.pageSize),this.pageNo=this.pageNo-1},next:function(){this.getPage(this.pageNo+1,this.pageSize),this.pageNo=this.pageNo+1},getPage:function(e,t){var s=this;l.a.get("http://localhost:8080/customerList",{params:{pageNo:e,pageSize:t}}).then((function(e){s.tableData=e.data.data.data,s.pageCount=e.data.data.pageCount}))},getSourceAll:function(){var e=this;l.a.get("http://localhost:8080/sourceAll",{}).then((function(t){e.sourceList=t.data.data}))},getIndustryList:function(){var e=this;l.a.get("http://localhost:8080/industryAll",{}).then((function(t){e.industryList=t.data.data}))},getLevelList:function(){var e=this;l.a.get("http://localhost:8080/levelAll",{}).then((function(t){e.levelList=t.data.data}))}}},u=c,i=s("2877"),m=Object(i["a"])(u,r,o,!1,null,"301e8f38",null);t["default"]=m.exports},e9c4:function(e,t,s){var r=s("23e7"),o=s("d066"),a=s("d039"),l=o("JSON","stringify"),c=/[\uD800-\uDFFF]/g,u=/^[\uD800-\uDBFF]$/,i=/^[\uDC00-\uDFFF]$/,m=function(e,t,s){var r=s.charAt(t-1),o=s.charAt(t+1);return u.test(e)&&!i.test(o)||i.test(e)&&!u.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},n=a((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&r({target:"JSON",stat:!0,forced:n},{stringify:function(e,t,s){var r=l.apply(null,arguments);return"string"==typeof r?r.replace(c,m):r}})}}]);